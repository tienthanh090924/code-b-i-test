<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nhập Sách</title>
  <link rel="stylesheet" href="formnhap.css" />
</head>
<body>
  <div class="container section fade-in">
    <h2>Nhập Thông Tin Sách</h2>
    <form id="book-form">
      <div class="form-group">
        <label for="book-name">Tên sách <span>*</span></label>
        <input type="text" id="book-name" required autofocus />
      </div>
      <div class="form-group">
        <label for="quantity">Số lượng <span>*</span></label>
        <input type="number" id="quantity" required min="1" />
      </div>
      <div class="form-group">
        <label for="price">Giá bán (VNĐ) <span>*</span></label>
        <input type="number" id="price" required min="0" />
      </div>
      <button type="submit" class="btn-submit">Lưu</button>
    </form>

    <!-- Nút quay lại trang chủ -->
    <button class="btn-back" onclick="goToHomePage()">Quay lại trang chủ</button>
  </div>

  <script>
    // Fade in hiệu ứng sau khi load trang
    window.addEventListener("DOMContentLoaded", () => {
      const section = document.querySelector(".section");
      section.classList.add("active");
    });

    // Xử lý lưu thông tin
    document.getElementById("book-form").addEventListener("submit", function (event) {
      event.preventDefault();

      const bookName = document.getElementById("book-name").value.trim();
      const quantity = parseInt(document.getElementById("quantity").value);
      const price = parseFloat(document.getElementById("price").value);

      if (!bookName || quantity <= 0 || price < 0) {
        alert("Vui lòng nhập đầy đủ thông tin hợp lệ.");
        return;
      }

      const bookData = { name: bookName, quantity, price };

      if (price > 2000000) {
        const confirmSave = confirm(
          `Giá sách "${bookName}" là ${price.toLocaleString()} VNĐ. Bạn có chắc chắn muốn lưu không?`
        );
        if (!confirmSave) {
          alert("Đã hủy lưu thông tin sách.");
          return;
        }
      }

      let books = JSON.parse(localStorage.getItem("books")) || [];
      books.push(bookData);
      localStorage.setItem("books", JSON.stringify(books));

      alert("Thông tin sách đã được lưu.");
      window.location.href = "formxem.html";
    });

    // Hàm quay lại trang chủ
    function goToHomePage() {
      window.location.href = "index.html";  // Thay "index.html" bằng trang chủ của bạn
    }
  </script>
</body>
</html>
